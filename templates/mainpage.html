{%extends "columns.html"%}
<script src="../static/js/stock_api.js"></script>
{%block main%}
<form method="GET" id="searchForm" action="/api/searchPosts">
    <input type="text" name="searchPosts" id="searchContent">
    <button type="submit" for="searchPosts" id="searchButton">Search</button>
</form>
<h1>Recent Posts</h1>
<div class="pure-g post-div">
    <div class="pure-u-1-12">
    </div>
    <div class="pure-u-20-24">
        {%for post in posts%}
            
            <div class="pure-g ">
                <div class="pure-u-10-12">
                    <div class="post-design">
                       <a href="/profile/{{posts[post]['posterID']}}"><button href> <img id="userImage" src="/getAvatar/{{posts[post]['posterID']}}" > </button></a>
                        <h1>{{posts[post]["username"]}}</h1>
                        <h1>{{posts[post]["posterID"]}}</h1>
                        <h2>{{posts[post]["tags"]}}</h2>
                        <p>{{posts[post]["content"]}}</p>
                    </div>
                    <div class="post-buttons">
                        {%if [posts[post]["posterID"]] in followers %}
                        <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" >unFollow</button></a>
                        {%else%}
                        <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" >Follow</button></a>
                        <button id="like-button">Like</button>
                        {%endif%}
                    </div>
                </div>
            </div>
        {%endfor%}
        </div>
    <div class="pure-u-1-12">
    </div>
</div>
    
{%endblock%}

{%block secondary%}
<h2>Stock Data</h2>
<form method="GET" id="stockForm">
    <input list="stock" name="stock">
    <datalist id="stock" class="pure-input-1-2">
        {%for stock in stocks%}
        <option value={{stock.symbol}}>{{stock.symbol}} - {{stock.name}}</option>
        {%endfor%}
    </datalist>

    <button type="submit" class="pure-button">Search</button>
</form>
<div class="pure-g">


<h1 class="pure-u-1-2">Symbol: {{stockData.symbol}}</h1>
<h1 class="pure-u-1-2">Date of Data: {{stockData.from}}</h1>
</div>
<div clas="pure-g">
    <img src="{{stockData.logo}}" alt="{{stockData.name}} Logo"/>
    <h1>Open Price: {{stockData.open}}</h1>
    <h1>Close Price: {{stockData.close}}</h1>
    <h1>High: {{stockData.high}}</h1>
    <h1>Low: {{stockData.low}}</h1>
    <h1>Volume: {{stockData.volume}}</h1>
</div>


{%endblock%}

{%block tertiary%}

<h2>List of stocks</h2>
<table class="pure-table pure-table-horizontal pure-table-striped">
    <thead>
        <tr>
            <th>Symbol</th>
            <th>Name</th>
            
        </tr>
    </thead>
    <tbody>        
        {%for stock in splist%}

        <tr>
            
           <td><a href={{stock.link}}>{{stock.symbol}}</td>
            <td>{{stock.name}}</td>
            {%if [stock.symbol,stock.name] in subscriptions %}

            <td><a href="/followStock/{{stock.symbol}}"><button>unfollow stock</button></a></td>
            {%else%}
            <td><a href="/followStock/{{stock.symbol}}"><button>follow stock</button></a></td>
            {%endif%}
            <td><a href="/?stock={{stock.symbol}}&name={{stock.name}}"><button>view stock</button></a></td>
        </tr>
        {%endfor%}
       
    </tbody>
</table>

{%endblock%}