{%extends "columns.html"%}
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
{%block primary%}
<h1>Recent Posts</h1>
<form method="GET" id="searchForm" action="/api/searchPosts" class="pure-form">
    <input type="text" name="searchPosts" id="searchContent" class="pure-input-2-3">
    <button type="submit" for="searchPosts" id="searchButton" class="pure-button pure-button-primary">Search</button>
</form>
<div class="pure-g post-div">
    <div class="pure-u-1-24">
    </div>
    <div class="pure-u-22-24">
        {%for post in posts%}
            
            <div class="pure-g ">
                <div class="pure-u-11-12">
                    <div class="post-design">
                        <div class="post-top">
                            <img id="userImage" src="/getAvatar/{{posts[post]['posterID']}}" alt="{{posts[post]['username']}}'s PFP" > </button></a> 
                            <h1>{{posts[post]['username']}}</h1>
                        </div>                   
                        <p>{{posts[post]["content"]}}
                            
                            {%for tag in posts[post]["tags"]%}
                             #{{tag}}  
                            {%endfor%}
                        </p>
                        <div class="post-buttons">
                            {%if [posts[post]["posterID"]] in followers %}
                            <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button">unFollow</button></a>
                            {%else%}
                            <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button" >Follow</button></a>
                            <button id="like-button" class="pure-button">Like</button>
                            {%endif%}
                            
                        </div>
                    </div>
                </div>
            </div>
        {%endfor%}
        </div>
    <div class="pure-u-1-24">
    </div>
</div>
    
{%endblock%}

{%block secondary%}
<h2>Stock Data</h2>

<form method="GET" id="stockForm" class="pure-form">
    <div class="pure-u-1-5"></div>
    <div class="pure-u-3-5 search">
        <input list="stock-datalist" name="stock-datalist" class="pure-input-1">
        <datalist id="stock-datalist">
            {%for stock in splist%}
            <option value={{stock.symbol}}>{{stock.symbol}} - {{stock.name}}</option>
            {%endfor%}
        </datalist>
    </div>
    <button type="submit" class="pure-button pure-button-primary">Search</button>
    </form>
    <img id='company-logo' src="https://logo.clearbit.com/{{stockData.domain}}.com"
     onerror="this.src='../static/images/vecteezy_abstract-geometric-logo-icon-design_7752415.jpg'"/>
    <h1>{{stockData.name}}</h1>
    <table style="width:100%" class="pure-table pure-table-horizontal">
        <tr>
            <th>Ticker: </th>
            <td>{{stockData.symbol}}</td>
        </tr>
        <tr>
            <th>Date: </th>
            <td>{{stockData.from}}</td>
        </tr>
        <tr>
            <th>Open Price: </th>
            <td>{{stockData.open}}</td>
        </tr>
        <tr>
            <th>Close Price </th>
            <td>{{stockData.close}}</td>
        </tr>
        <tr>
            <th>High: </th>
            <td>{{stockData.high}}</td>
        </tr>
        <tr>
            <th>Low: </th>
            <td>{{stockData.low}}</td>
        </tr>
        <tr>
            <th>Volume: </th>
            <td>{{stockData.volume}}</td>
        </tr>
    </table>



{%endblock%}

{%block tertiary%}

<h2>List of stocks</h2>
<table class="pure-table pure-table-horizontal pure-table-striped">
    <thead class="stock-table">
        <tr>
            <th>Symbol</th>
            <th>Name</th>
            <th>Follow</th>
            <th>View</th>
        </tr>
    </thead>
    <tbody>        
        {%for stock in splist%}

        <tr>
           <td><a href={{stock.link}}>{{stock.symbol}}</td>
            <td>{{stock.name}}</td>
            {%if [stock.symbol,stock.name] in subscriptions %}

            <td><a href="/followStock/{{stock.symbol}}"><button>unfollow stock</button></a></td>
            {%else%}
            <td><a href="/followStock/{{stock.symbol}}"><button>follow stock</button></a></td>
            {%endif%}
            <td><a href="/?stock={{stock.symbol}}&name={{stock.name}}"><button>view stock</button></a></td>
        </tr>
        {%endfor%}
       
    </tbody>
</table>

{%endblock%}


{%block postPopup%}
<div class="post-field-visible pure-u-1-3" hidden id="create-post-div">

    <form enctype="multipart/form-data" hidden="true" action="/editProfile" id="profileUpdate" method="POST" class="pure-form pure-form-stacked">
        <fieldset>
            <legend>update your profile</legend>
            <span class="pure-form-message">This is a required field.</span>
            <label for="multi-first-name">real name</label>
        <input name="realname"  type="text" minlength="3" id="realname" class="pure-u-23-24" />
        <label for="multi-first-name">username</label>
        <input name="username"  type="text" minlength="3" id="username" class="pure-u-23-24" />
        <input type = "file" name = "image" />
        <button type="submit" class="pure-button pure-button-primary">submit</button>
    </fieldset>
</form> 

<form action="/Post" id="Post" method="POST" class="pure-form pure-form-stacked">
    <fieldset>
        <legend>Create your post</legend>
        <span class="pure-form-message">This is a required field.</span>
        <div class="pure-u-1 pure-u-md-1-3">
            <label for="stock">Stock</label>
            <input list="stock">
            <datalist id="stock" name="stock" class="pure-input-1-2">
                {%for stock in splist%}
                <option value=`{{stock.symbol}}`>{{stock.symbol}} - {{stock.name}}</option>
                {%endfor%}
            </datalist>
        </div>
        <textarea height="15" width="40"></textarea>
        <label for="tags" class="pure-checkbox">
            <input type="checkbox" id="tags" name="tags"value="bullish"/>
            <input type="checkbox" id="tags" name="tags" value="bearish"/>
            <input type="checkbox" id="tags" name="tags" value="top-pick"/> 
        </label>
        <button type="submit" class="pure-button pure-button-primary">submit</button>
    </fieldset>
</form>
</div>
{%endblock%}