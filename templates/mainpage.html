{%extends "columns.html"%}
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
{%block primary%}
<h1 class="oswald-header">Recent Posts</h1>
<form method="GET" action="/api/searchPosts" id="searchForm" class="pure-form">
    <input type="text" name="searchPosts" id="searchContent" class="pure-input-2-3">
    <button type="submit" for="searchPosts" id="searchButton" class="pure-button pure-button-primary">Search</button>
</form>
<div class="pure-g post-div">
    <div class="pure-u-1-24">
    </div>
    <div class="pure-u-22-24">
        {%for post in posts%}
            
            <div class="pure-g ">
                <div class="pure-u-11-12">
                    <div class="post-design">
                        <div class="post-top">
                            <img class="user-post-picture" src="/getAvatar/{{posts[post]['posterID']}}" alt="{{posts[post]['username']}}'s PFP" ></button></a> 
                            <h1>{{posts[post]['username']}}</h1>
                            <!-- <img id='company-logo' src="https://logo.clearbit.com/{{posts[post][]}}.com"/> -->
                            
                    </div>                   
                        <p>{{posts[post]["content"]}}
                            
                            {%for tag in posts[post]["tags"]%}
                             #{{tag}}  
                            {%endfor%}
                        </p>
                        <div class="post-buttons">
                            {%if [posts[post]["posterID"]] in [yourid] %}
                        <a href="/deletePost/{{post}}"><button id="follow-button" >delete post</button></a>
                        <button id="editPost{{post}}" onClick="display('Post{{post}}')">edit post</button>
                        
        <form action="/editPost" id="Post{{post}}" hidden="true" method="POST" class="pure-form pure-form-stacked">
            <fieldset>
                <legend>Create your post</legend>
                <span class="pure-form-message">This is a required field.</span>
                <label for="multi-first-name">description</label>
                <input name="description"  type="text" minlength="3" id="postDescription" class="pure-u-23-24" />
                <label for="tags" class="pure-checkbox">
                    <input type="checkbox" id="tags" name="tags"value="bullish"/>
                    <input type="checkbox" id="tags" name="tags" value="bearish"/>
                    <input type="checkbox" id="tags" name="tags" value="top-pick"/> 
                </label>
                <div class="pure-u-1 pure-u-md-1-3">
                <label for="stock">Stock</label>
                <input list="stock">
                <datalist id="stock" name="stock" class="pure-input-1-2">
                    {%for stock in stocks%}
                        <option value=`{{stock.symbol}}`>{{stock.symbol}} - {{stock.name}}</option>
                    {%endfor%}
                </datalist>
                </div>
                <button type="submit" class="pure-button pure-button-primary">submit</button>
            </fieldset>
        </form>
                        {%endif%}

                        {%if [posts[post]["posterID"]] in followers %}
                            <a href="/unfollow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button">unFollow</button></a>
                            {%else%}
                            <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button" >Follow</button></a>
                            <button id="like-button" class="pure-button">Like</button>
                            {%endif%}
                            
                        </div>
                    </div>
                </div>
            </div>
        {%endfor%}
        </div>
    <div class="pure-u-1-24">
    </div>
</div>
    
{%endblock%}

{%block secondary%}
<h1 class="oswald-header">Stock Data</h1>
<form method="GET" id="stockForm" class="pure-form">
    <div class="pure-u-1-5"></div>
    <div class="pure-u-3-5 search">
        <input list="stock-datalist" name="stock-datalist" class="pure-input-1">
        <datalist id="stock-datalist">
            {%for stock in splist%}
            <option value={{stock.symbol}}>{{stock.symbol}} - {{stock.name}}</option>
            {%endfor%}
        </datalist>
    </div>
    <button type="submit" class="pure-button pure-button-primary">Search</button>
</form>

    <div class="company-display pure-g">
        <div class="pure-u-1-3">
            <img id='company-logo' src="https://logo.clearbit.com/{{stockData.domain}}.com"
            onerror="this.style.display='none'"/>
            
        </div>
        <div class="group-stock pure-u-1-3">
            <h1>{{stockData.name}}</h1>
            <h1>{{stockData.symbol}}</h1>
            <h1>{{stockData.from}}</h1>
        </div>
    </div>
<div class="padding-table">
    <table style="width:100%" class="pure-table pure-table-horizontal stock-nums">
        
        <tr>
            <th>Open Price: </th>
            <td>{{stockData.open}}</td>
        </tr>
        <tr>
            <th>Close Price </th>
            <td>{{stockData.close}}</td>
        </tr>
        <tr>
            <th>High: </th>
            <td>{{stockData.high}}</td>
        </tr>
        <tr>
            <th>Low: </th>
            <td>{{stockData.low}}</td>
        </tr>
        <tr>
            <th>Volume: </th>
            <td>{{stockData.volume}}</td>
        </tr>
    </table>
</div>


{%endblock%}

{%block tertiary%}

<div class="stock-list-table">
<h1 class="oswald-header">List of Stocks</h1>
<table class="pure-table pure-table-horizontal pure-table-striped">
    <thead >
        <tr>
            <th>Symbol</th>
            <th>Name</th>
            <th>Follow</th>
            <th>View</th>
        </tr>
    </thead>
    <tbody>
        
        {%for stock in splist%}
        
        <tr>
            <td><a href={{stock.link}}>{{stock.symbol}}</td>
                <td>{{stock.name}}</td>
                {%if [stock.symbol,stock.name] in subscriptions %}
                
                <td><a href="/unsubscribe/{{stock.symbol}}"><button>Unfollow</button></a></td>
                {%else%}
                <td><a href="/followStock/{{stock.symbol}}"><button>Follow</button></a></td>
                {%endif%}
                <td><a href="/?stock-datalist={{stock.symbol}}&name={{stock.name}}"><button>View</button></a></td>
            </tr>
            {%endfor%}
            
        </tbody>
    </table>
</div>

{%endblock%}


