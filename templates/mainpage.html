{%extends "columns.html"%}
<script src="../static/js/stock_api.js"></script>
{%block primary%}
<h1>Recent Posts</h1>
<form method="GET" id="searchForm" action="/api/searchPosts" class="pure-form">
    <input type="text" name="searchPosts" id="searchContent" class="pure-input-2-3">
    <button type="submit" for="searchPosts" id="searchButton" class="pure-button pure-button-primary">Search</button>
</form>
<div class="pure-g post-div">
    <div class="pure-u-1-24">
    </div>
    <div class="pure-u-22-24">
        {%for post in posts%}
            
            <div class="pure-g ">
                <div class="pure-u-11-12">
                    <div class="post-design">
                        <div class="post-top">
                            <img id="userImage" src="/getAvatar/{{posts[post]['posterID']}}" alt="{{posts[post]['username']}}'s PFP" > </button></a> 
                            <h1>{{posts[post]['username']}}</h1>
                        </div>                   
                        <p>{{posts[post]["content"]}}
                            
                            {%for tag in posts[post]["tags"]%}
                             #{{tag}}  
                            {%endfor%}
                        </p>
                        <div class="post-buttons">
                            {%if [posts[post]["posterID"]] in followers %}
                            <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button">unFollow</button></a>
                            {%else%}
                            <a href="/follow/{{posts[post]['posterID']}}"><button id="follow-button" class="pure-button" >Follow</button></a>
                            <button id="like-button" class="pure-button">Like</button>
                            {%endif%}
                            
                        </div>
                    </div>
                </div>
            </div>
        {%endfor%}
        </div>
    <div class="pure-u-1-24">
    </div>
</div>
    
{%endblock%}

{%block secondary%}
<h2>Stock Data</h2>

<form method="GET" id="stockForm" class="pure-form">
    <div class="pure-u-1-5"></div>
    <div class="pure-u-3-5 search">
        <input list="stock-datalist" name="stock-datalist" class="pure-input-1">
        <datalist id="stock-datalist">
            {%for stock in splist%}
            <option value={{stock.symbol}}>{{stock.symbol}} - {{stock.name}}</option>
            {%endfor%}
        </datalist>
    </div>
    <button type="submit" class="pure-button pure-button-primary">Search</button>
    </form>
<div class="pure-g stock-info">
    <img src="{{stockData.logo}}" alt="{{stockData.name}}'s' Logo"/>
    <h1 class="pure-u-1-2">Symbol: {{stockData.symbol}}</h1>
    <h1 class="pure-u-1-2">Date of Data: {{stockData.from}}</h1>
    <h1>Open Price: {{stockData.open}}</h1>
    <h1>Close Price: {{stockData.close}}</h1>
    <h1>High: {{stockData.high}}</h1>
    <h1>Low: {{stockData.low}}</h1>
    <h1>Volume: {{stockData.volume}}</h1>
</div>


{%endblock%}

{%block tertiary%}

<h2>List of stocks</h2>
<table class="pure-table pure-table-horizontal pure-table-striped">
    <thead>
        <tr>
            <th>Symbol</th>
            <th>Name</th>
            <th>Follow</th>
            <th>View</th>
        </tr>
    </thead>
    <tbody>        
        {%for stock in splist%}

        <tr>
           <td><a href={{stock.link}}>{{stock.symbol}}</td>
            <td>{{stock.name}}</td>
            {%if [stock.symbol,stock.name] in subscriptions %}

            <td><a href="/followStock/{{stock.symbol}}"><button>unfollow stock</button></a></td>
            {%else%}
            <td><a href="/followStock/{{stock.symbol}}"><button>follow stock</button></a></td>
            {%endif%}
            <td><a href="/?stock={{stock.symbol}}&name={{stock.name}}"><button>view stock</button></a></td>
        </tr>
        {%endfor%}
       
    </tbody>
</table>

{%endblock%}